<link rel="import" href="/editor/bower_components/polymer/polymer.html">
<link rel="import" href="/editor/bower_components/app-layout/app-layout.html">
<link rel="import" href="/editor/bower_components/paper-tabs/paper-tabs.html">
<link rel="import" href="/editor/bower_components/iron-pages/iron-pages.html">
<link rel="import" href="/editor/src/game-view.html">

<dom-module id="editor-app">
    <template>
        <style>
            :host{
                display: block;
                --almost-black: #141720;
                --dark-grey: #232733;
                --medium-grey: #2f3545;
                --light-grey: #383f52;
                --highlight-pink: #e91e63;
                --highlight-blue: #2196f3;
                --input-border-color: #596c7a;                
                --paper-tabs-selection-bar-color: var(--highlight-pink);
                --paper-tab-ink: var(--input-border-color);
            }

            app-header {
                background-color: var(--almost-black);
                color: white;                
            }

            paper-tabs {
                background-color: var(--dark-grey);
                color: white;                                
            }

            app-header-layout {
                display: flex;
                flex-direction: column;
            }

            iron-pages {
                height: 100%;
            }
        </style>

        <app-header-layout>
            <app-header slot="header" fixed>
                <app-toolbar class="toolbar">
                    <div main-title>Editor</div>
                </app-toolbar>
            </app-header>

            <paper-tabs selected="{{index}}" scrollable>
                <paper-tab>Preview</paper-tab>
                <paper-tab>Tiles</paper-tab>
                <paper-tab>Tokens</paper-tab>
            </paper-tabs>

            <iron-pages selected={{index}} selected-attribute="visible">
                <div style="background-color:aqua; height: 100%">Preview</div>
                <div>Tiles</div>
                <div>Tokens</div>
            </iron-pages>
            <app-header>Test</app-header>            
        </app-header-layout>
        
    </template>
    <script>
        class EditorApp extends Polymer.Element {
            static get is() {
                return 'editor-app'; 
            }

            ready() {
                super.ready();
                
                // When possible, use afterNextRender to defer non-critical
                // work until after first paint.
                Polymer.RenderStatus.afterNextRender(this, function() {
                    //
                });

                this.index = 0;
            }

            static get properties() {
                return {
                    index: {
                        type: Number,
                        observer: '_pageChanged'
                    },
                    enablestep: {
                        type: Boolean,
                        notify: true,
                        observer: '_enablestepChanged'
                    }
                }
            }

            _pageChanged(newValue, oldValue) {
                //console.log('editor-app: _pageChanged', newValue, oldValue);
                this.enablestep = (oldValue == 0);
            }

            _enablestepChanged(newValue, oldValue) {
                //console.log('editor-app: _enablestepChanged', newValue, oldValue);
            }

        }
        window.customElements.define(EditorApp.is, EditorApp);
    </script>
</dom-module>